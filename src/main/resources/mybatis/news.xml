<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<!-- dev.mvc.jobnws.JobnwsDAOInter 패키지에 등록된 interface 명시,
      패키지명과 인터페이스명은 실제로 존재해야함,
      Spring이 내부적으로 자동으로 interface를 구현해줌. -->
<mapper namespace="dev.mvc.jobnws.JobnwsDAOInter"> 
 <!-- 
  insert: INSERT SQL 실행
  id: Spring에서 호출시 사용
  parameterType: 전달받는 데이터 객체의 타입
  return: 등록한 레코드 갯수 리턴
  SQL선언시 ';'은 삭제
  #{}: ? 동일
  #{name}: public String getName() 자동 호출
   -->
    <insert id="create" parameterType="JobnwsVO">
      INSERT INTO news(newsno, news_title, news_content, news_url, news_passwd, news_date, news_file1, news_thumb1, news_size1)
      VALUES(news_seq.nextval, #{news_title}, #{news_content}, #{news_url}, #{news_passwd}, sysdate, #{news_file1}, #{news_thumb1}, #{news_size1})
    </insert>
   
    <select id="list_newsno_asc" resultType="JobnwsVO">
      SELECT newsno, news_title, news_content, news_url, news_cnt, news_good, news_coment, news_date, news_file1, news_thumb1, news_size1
      FROM news
      ORDER BY newsno ASC
    </select>
    
    <!-- 조회, id: read, 입력: newsno, 리턴: JobnwsVO -->
    <select id="read" resultType="JobnwsVO" parameterType="int">
      SELECT newsno, news_title, news_content, news_url, news_cnt, news_good, news_coment, news_date, news_file1, news_thumb1, news_size1
      FROM news
      WHERE newsno= #{newsno}
    </select>
    
    <!--수정 처리, id: update, 입력: JobnwsVO  -->
    <update id="update" parameterType="JobnwsVO">
     UPDATE news
     SET news_title=#{news_title}, news_content=#{news_content}, news_url=#{news_url}
     WHERE newsno = #{newsno}
    </update>
    
    <!-- 삭제, id: delete,  입력: newsno -->
    <delete id="delete" parameterType="int">
      DELETE FROM news
      WHERE newsno = #{newsno}
    </delete>
    
   <select id = "news_passwd_check" parameterType="HashMap" resultType="int">
     SELECT COUNT(*) as news_passwd_cnt
     FROM news
     WHERE newsno=#{newsno} AND news_passwd=#{news_passwd}
   </select>
   
   <update id="update_cnt" parameterType="int">
     UPDATE news
     SET news_cnt = news_cnt + 1 
     WHERE newsno = #{newsno}
   </update>
   
   <update id="update_good" parameterType="int">
     UPDATE news
     SET news_good = news_good + 1 
     WHERE newsno = #{newsno}
   </update>
   
   <!-- 첨부 파일 메인 이미지 변경 -->
   <update id="update_img" parameterType="JobnwsVO">
     UPDATE news
     SET news_file1=#{news_file1}, news_thumb1=#{news_thumb1}, news_size1=#{news_size1}
     WHERE newsno=#{newsno} 
   </update>
  
  
    
       
</mapper>
 